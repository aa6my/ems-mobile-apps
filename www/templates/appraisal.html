<ion-view title="Appraisal">
    <ion-nav-buttons side="left">
        <button menu-toggle="left"class="button button-icon icon ion-android-arrow-back"></button>
    </ion-nav-buttons>
    <div ng-controller="Performance" ng-app="performanceModule">
    <ion-content class="background">
        <ion-refresher
        pulling-text="Pull to refresh..."
        on-refresh="doRefreshAppraisal()">
        </ion-refresher>
        
        <div class="ft-container">
        
            <table class="footable" data-page-size="5">
                <thead>
                <tr>
                    <th>
                        Employee
                    </th>                    
                    <th>
                        Date
                    </th>
                    <th>
                        Expectation
                    </th>                    
                    <th>
                        Result
                    </th>
                    <th>
                        Is completed
                    </th>
                    <th>
                        Action
                    </th>
                
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="p in performance_appraisals()">
                    <td>{{::p.name}}</td>                    
                    <td>{{::p.start_date}} - {{::p.end_date}}</td>
                    <td>{{::p.expectations}}</td>
                    <td>
                    	<span ng-show="{{::p.is_completed==0}}">NO RESULT YET</span>
                        <span ng-show="{{::p.is_completed==1}}">{{::p.results}}</span>
                    </td>
                    <td>
                    	<span ng-show="{{::p.is_completed==0}}">NO</span>
                        <span ng-show="{{::p.is_completed==1}}">YES</span>
                    </td>
                    <td>
                        <span ng-show="{{::p.is_completed==0}}">
                        	<a ng-click="goToEditPageAppraisal({{::p.appraisal_id}})"><i class="icon ion-edit"></i></a>
                            <a ng-click="deleteDataAppraisal({{::p.appraisal_id}})"><i class="icon ion-trash-a"></i></a>
                            <a ng-click="goToLogPage({{::p.appraisal_id}})"><i class="icon ion-filing"></i></a>
                        </span>
                        <span ng-show="{{::p.is_completed==1}}">                        	
                            <a ng-click="deleteDataAppraisal({{::p.appraisal_id}})"><i class="icon ion-trash-a"></i></a>
                        </span>
                        


                    </td>
                </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="7" class="text-center">
                        <ul class="pagination">
                        </ul>
                        </td>
                    </tr>
                </tfoot>
            </table>
        </div>
        <script id="modal_appraisal.html" type="text/ng-template">
                      <ion-modal-view >
                        <ion-header-bar class="bar bar-header head">
                          <h1 class="title">{{myModal.title}}</h1>
                          <button class="button button-clear button-primary" ng-click="modal_appraisal.hide()">Cancel</button>
                        </ion-header-bar>
                        <ion-content class="padding">
                          <div class="list">
                          <div class="item item-input-inset" style="border:none">                        
                              

                                 <select class="form-control" ng-model="formData.employee_id" id="employee_id">
                                  <option value="">-Select position-</option>
                                  <option value="{{::p.employee_id}}" ng-repeat="p in employees" >{{::p.name}}</option>
                                 
                                </select> 
                                
                                                                                                       
                            </div> 
                            <div class="item item-input-inset" style="border:none">                        
                               <label class="item-input-wrapper">
                                  <input type="text" placeholder="Start Date" ng-model="formData.start_date"> 
                                </label> 
                                &nbsp;
                                <label class="item-input-wrapper">
                                  <input type="text" placeholder="End Date" ng-model="formData.end_date"> 
                                </label>                                                                        
                            </div>
                                                       
                            

                            <div class="item item-input-inset" style="border:none">                        
                               <label class="item-input-wrapper">
                                  <input type="text" placeholder="Expectation" ng-model="formData.expectations"> 
                                </label>                                                                           
                            </div>

                            <div class="item item-input-inset" style="border:none" ng-show="is_completed_show">
                            	<span class="label label-info">Is Completed</span> &nbsp;&nbsp;
		                        <div class="btn-group">
		                            <label class="btn btn-primary is_com" ng-model="formData.is_completed" btn-radio="0">No</label>
		                            <label class="btn btn-primary is_com" ng-model="formData.is_completed" btn-radio="1">Yes</label>
		                        </div>		                                           
		                    </div>

		                    <div class="item item-input-inset" style="border:none;display:none" id="results">                        
                               <label class="item-input-wrapper">
                                  <input type="text" placeholder="Results" ng-model="formData.results"> 
                                </label>                                                                           
                            </div>
                       
                            <button class="button button-full button-assertive" ng-click="addDataAppraisal()" ng-init="true" ng-show="s_button">Add</button>
                           <button class="button button-full button-assertive" ng-click="editDataAppraisal(appraisal_id)" ng-show="e_button" ng-init="false">Save</button>
                          </div>
                        </ion-content>
                      </ion-modal-view>
                  </script>
</ion-content> 

<div class="tabs tabs-icon-only">
        <a class="tab-item">
            <i class="icon ion-home" ng-click="backHome()"></i>
        </a>
        <a class="tab-item">
            <i class="icon ion-plus-circled" ng-click='goToAddDataPageAppraisal()'></i>
        </a>
        <a class="tab-item">
            <i class="icon ion-gear-a"></i>
        </a>
    </div>
</div>
</ion-view>
<script type="text/javascript">
    $(function () {

        $(document).on('click','.is_com', function(){
        	var value = $(this).attr('btn-radio');
        	    if(parseInt(value) === 1){
        	    	$('#results').show();
        	    }
        	    else{
        	    	$('#results').hide();
        	    }
        });
        
    });
</script>